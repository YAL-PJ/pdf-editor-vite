<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>PDF Editor MVP</title>

    <!-- Critical: reserve toolbar space on first paint to prevent CLS -->
    <style>
      /* Minimal critical CSS: only whatâ€™s required to prevent layout shift */
      #toolbar.hydrating {
        box-sizing: border-box;
        min-height: 110px;   /* reserve ~2 rows */
        visibility: hidden;  /* keep space while hydrating */
      }
    </style>

    <!-- Global styles (pulls in src/styles/viewer.css from src/style.css) -->
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body>
    <main>
        <div class="viewer-header">
          <div class="viewer-header__inner">
            <h1 class="viewer-header__title">PDF Viewer</h1>
            <div class="viewer-actions" role="group" aria-label="Document actions">
              <button
                id="btnDownloadAnnotated"
                type="button"
                class="viewer-action-btn viewer-action-btn--primary"
                aria-label="Download PDF with annotations"
                title="Download PDF with annotations"
              >
                <span class="viewer-action-btn__icon" aria-hidden="true">
                  <img src="/src/assets/icons/download.svg" alt="" />
                </span>
                <span class="viewer-action-btn__label">Download</span>
              </button>
              <button
                id="btnPrintAnnotated"
                type="button"
                class="viewer-action-btn viewer-action-btn--secondary"
                aria-label="Print PDF with annotations"
                title="Print PDF with annotations"
              >
                <span class="viewer-action-btn__icon" aria-hidden="true">
                  <img src="/src/assets/icons/print.svg" alt="" />
                </span>
                <span class="viewer-action-btn__label">Print</span>
              </button>
              <button
                id="btnShareAnnotated"
                type="button"
                class="viewer-action-btn viewer-action-btn--secondary"
                aria-label="Share PDF with annotations"
                title="Share PDF with annotations"
              >
                <span class="viewer-action-btn__icon" aria-hidden="true">
                  <img src="/src/assets/icons/share.svg" alt="" />
                </span>
                <span class="viewer-action-btn__label">Share</span>
              </button>
              <button
                id="btnSaveLocalAnnotated"
                type="button"
                class="viewer-action-btn viewer-action-btn--secondary"
                aria-label="Save annotations locally"
                title="Save annotations locally"
              >
                <span class="viewer-action-btn__icon" aria-hidden="true">
                  <img src="/src/assets/icons/save.svg" alt="" />
                </span>
                <span class="viewer-action-btn__label">Save</span>
              </button>
            </div>
          </div>
        </div>

      <div class="page-shell">

        <!-- Toolbar: start hidden but space-reserved to avoid CLS -->
        <div class="toolbar-row">
          <div id="toolbar" class="hydrating" role="toolbar" aria-label="Annotation toolbar"></div>
          <div id="historyControls" class="history-controls-shell" aria-label="History controls"></div>
        </div>


        <div id="navControls" class="nav-floating" aria-label="Page navigation and zoom"></div>
        <!-- Viewer area -->
        <div class="viewer-scroll">
          <div class="viewer-stage">
            <div class="file-input-panel">
              <input class="file-input-native" type="file" id="fileInput" accept="application/pdf" />
              <div class="file-input-actions">
                <label class="file-input-button" for="fileInput">
                  <span class="file-input-button__icon" aria-hidden="true">&#128194;</span>
                  <span>Select PDF</span>
                </label>
                <button
                  id="btnClearDocument"
                  type="button"
                  class="file-input-clear"
                  aria-label="Remove the current PDF and return to an empty canvas"
                  title="Remove the current PDF"
                  disabled
                >
                  <span class="file-input-clear__icon" aria-hidden="true">
                    <img src="/src/assets/icons/close.svg" alt="" />
                  </span>
                  <span class="file-input-clear__label">Remove</span>
                </button>
              </div>
            </div>
            <div class="viewer-layout">
              <aside
                id="thumbnailPane"
                class="thumbnail-pane"
                aria-label="Page thumbnails"
                hidden
              >
                <div class="thumbnail-pane__header">
                  <span class="thumbnail-pane__title">Pages</span>
                  <button
                    id="thumbnailPaneToggle"
                    type="button"
                    class="thumbnail-pane__toggle"
                    aria-expanded="true"
                    aria-controls="thumbnailList"
                  >
                    Hide
                  </button>
                </div>
                <div id="thumbnailList" class="thumbnail-list" role="list"></div>
              </aside>
              <button
                id="thumbnailPaneShow"
                class="thumbnail-pane__show"
                type="button"
                hidden
                aria-expanded="false"
                aria-controls="thumbnailList"
              >
                Show thumbnails
              </button>
              <div class="viewer-host">
                <div id="viewer" class="placeholder">
                  <div class="drop-overlay" aria-hidden="true">
                    <div class="drop-overlay__icon">&#10515;</div>
                    <div class="drop-overlay__text">Click to select or drag & drop a PDF</div>
                  </div>
                  <canvas id="pdfCanvas" role="img" aria-label="PDF page canvas"></canvas>
                  <div id="textLayer" class="pdf-text-layer" aria-hidden="true"></div>
                  <div id="annoLayer"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <noscript>This app requires JavaScript enabled.</noscript>
      </div>
    </main>

    <footer class="site-footer" aria-label="Site footer">
      <div class="site-footer__inner">
        <section class="site-footer__section" aria-labelledby="footer-contact">
          <h2 id="footer-contact" class="site-footer__title">Contact</h2>
          <p class="site-footer__text">
            Email: <a href="mailto:hello@example.com">hello@example.com</a>
          </p>
        </section>
      </div>
    </footer>

    <!-- Vite entry -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>

